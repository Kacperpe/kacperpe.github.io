<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nasze Zdjecia</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gallery">
    <div class="overlay" id="overlay"></div>

    <main class="page-shell">
        <section class="glass info-card">
            <p class="subtitle">Wspolne momenty</p>
            <h1 class="page-title">Galeria</h1>
            <p class="subtitle">Kliknij zdjecie, aby obrocic karte. Podwojne klikniecie otwiera powiekszenie.</p>

            <div class="toolbar">
                <a class="btn btn-secondary" href="calendar.html">Kalendarz</a>
                <a class="btn btn-subtle" href="timetable.html">Timetable</a>
                <a class="btn btn-subtle" href="nextpage.html">Wstecz</a>
            </div>
        </section>

        <section class="scroll-sliders" id="sliders"></section>
        <p class="center-text">Nasze wspolne chwile, ktore zostana z nami na zawsze.</p>

        <section class="gallery-wrap glass">
            <h2>Wybrane zdjecia</h2>
            <div class="photo-grid" id="photoGrid"></div>
        </section>
    </main>

    <a class="btn btn-subtle back-link" href="nextpage.html">Wstecz</a>

    <div class="navigation-menu">
        <button class="menu-button" aria-label="Otworz menu" aria-expanded="false">Menu</button>
        <div class="menu-content">
            <a href="index.html">Home</a>
            <a href="list_z_piosenk%C4%85.html">List</a>
            <a href="nextpage.html">Love</a>
            <a href="zdjecia.html">Zdjecia</a>
            <a href="timetable.html">Timetable</a>
            <a href="calendar.html">Kalendarz</a>
        </div>
    </div>

    <script src="shared-nav.js"></script>
    <script>
        (function () {
            const IMAGES = [
                "20250316_163005.jpg",
                "20250316_170955.jpg",
                "20250316_175440.jpg",
                "20250316_194928.jpg",
                "20250320_122741.jpg",
                "20250321_133705.jpg",
                "20250328_143549.jpg",
                "20250331_221048.jpg",
                "20250403_190337.jpg",
                "20250421_180146.jpg",
                "20250428_211938.jpg",
                "20250429_114250.jpg",
                "20250429_140832.jpg",
                "20250504_084002.jpg",
                "20250506_122236.jpg",
                "20250923_043326.jpg",
                "20250923_043933.jpg",
                "20250924_155616(0).jpg",
                "20250925_105042.jpg",
                "20250925_110655.jpg",
                "20250925_115102.jpg",
                "20250925_124749.jpg",
                "20250925_125240.jpg",
                "20250925_131402.jpg",
                "20250925_135012.jpg",
                "20250925_150935.jpg",
                "20250925_152745.jpg",
                "20250925_152803.jpg",
                "20250925_221752.jpg",
                "20250925_221827.jpg",
                "20250926_120744.jpg",
                "20250926_123150.jpg",
                "20250926_155046.jpg",
                "20250926_160124.jpg",
                "20250926_161651.jpg",
                "20250926_202947.jpg",
                "20250927_102647.jpg",
                "20250927_103942.jpg",
                "20250927_121819(0).jpg",
                "20250928_122129.jpg",
                "20250928_122134.jpg",
                "20250929_151613.jpg",
                "20250929_152154.jpg",
                "20250929_160126(0).jpg",
                "20250929_160224.jpg",
                "20250929_160725.jpg",
                "20250929_160844.jpg",
                "20250929_163551.jpg",
                "20250930_065450.jpg",
                "20251002_073010.jpg",
                "20251002_073016.jpg",
                "20251010_221705.jpg",
                "20251017_072439.jpg",
                "20251017_113437.jpg",
                "20251020_222933.jpg",
                "20251021_140832.jpg",
                "20251025_194139.jpg",
                "20251025_194157.jpg",
                "20251025_210305.jpg",
                "20251029_232232.jpg",
                "20251102_133432.jpg",
                "20251102_133436.jpg",
                "oliwia1.jpg",
                "oliwia2.jpg",
                "oliwia3.jpg",
                "oliwia4.jpg",
                "oliwia5.jpg",
                "oliwia6.jpg",
                "oliwia7.jpg",
                "oliwia8.jpeg",
                "oliwia9.jpg",
                "photo1.jpg",
                "received_1116532277209669.jpeg",
                "received_2271314106603902.jpeg",
                "received_4101841870071083.jpeg",
                "Screenshot_20251010_125237_Revolut.jpg"
            ];

            const CAPTIONS = {
                "oliwia1.jpg": "Pamietam to spotkanie i ten klimat.",
                "oliwia2.jpg": "Tu znowu walka o telefon.",
                "oliwia3.jpg": "Najpiekniejszy kwiat ogrodu.",
                "oliwia4.jpg": "Jedno z moich ulubionych zdjec.",
                "oliwia8.jpeg": "Kadr, do ktorego zawsze wracam.",
                "oliwia9.jpg": "Spacer, ktory zapamietalem."
            };

            const GRID_COUNT = 12;
            const SLIDER_COUNT = 18;

            function shuffle(list) {
                const copy = list.slice();
                for (let i = copy.length - 1; i > 0; i -= 1) {
                    const j = Math.floor(Math.random() * (i + 1));
                    const temp = copy[i];
                    copy[i] = copy[j];
                    copy[j] = temp;
                }
                return copy;
            }

            function pickRandomItems(list, count) {
                const data = shuffle(list);
                return data.slice(0, Math.min(count, data.length));
            }

            function createSlider(levelClass, files) {
                const slider = document.createElement("div");
                slider.className = "scroll-slider " + levelClass;
                const track = document.createElement("div");
                track.className = "slide-track";
                const duplicate = files.concat(files);

                duplicate.forEach(function (file) {
                    const img = document.createElement("img");
                    img.src = "images/" + file;
                    img.alt = "";
                    track.appendChild(img);
                });

                slider.appendChild(track);
                return slider;
            }

            function createPhotoCard(file) {
                const cell = document.createElement("div");
                cell.className = "photo-cell";

                const card = document.createElement("div");
                card.className = "photo-card";

                const front = document.createElement("div");
                front.className = "photo-front";
                const img = document.createElement("img");
                img.src = "images/" + file;
                img.alt = file;
                front.appendChild(img);

                const back = document.createElement("div");
                back.className = "photo-back";
                back.textContent = CAPTIONS[file] || "Kliknij podwojnie, aby powiekszyc to zdjecie.";

                card.appendChild(front);
                card.appendChild(back);
                cell.appendChild(card);

                return cell;
            }

            function closeZoom() {
                document.querySelectorAll(".photo-cell.zoomed").forEach(function (item) {
                    item.classList.remove("zoomed");
                });
                document.getElementById("overlay").classList.remove("active");
            }

            function initInteractions() {
                const overlay = document.getElementById("overlay");
                const cells = document.querySelectorAll(".photo-cell");

                cells.forEach(function (cell) {
                    cell.addEventListener("click", function () {
                        cell.classList.toggle("flipped");
                    });

                    cell.addEventListener("dblclick", function (event) {
                        event.preventDefault();
                        if (cell.classList.contains("zoomed")) {
                            closeZoom();
                            return;
                        }
                        closeZoom();
                        cell.classList.add("zoomed");
                        overlay.classList.add("active");
                    });
                });

                overlay.addEventListener("click", closeZoom);
                document.addEventListener("keydown", function (event) {
                    if (event.key === "Escape") {
                        closeZoom();
                    }
                });
            }

            function buildGallery() {
                const sliders = document.getElementById("sliders");
                const grid = document.getElementById("photoGrid");
                sliders.innerHTML = "";
                grid.innerHTML = "";

                const sliderA = pickRandomItems(IMAGES, SLIDER_COUNT);
                const sliderB = pickRandomItems(IMAGES, SLIDER_COUNT);
                sliders.appendChild(createSlider("level-1", sliderA));
                sliders.appendChild(createSlider("level-2", sliderB));

                pickRandomItems(IMAGES, GRID_COUNT).forEach(function (file) {
                    grid.appendChild(createPhotoCard(file));
                });

                initInteractions();
            }

            document.addEventListener("DOMContentLoaded", buildGallery);
        })();
    </script>
</body>
</html>
